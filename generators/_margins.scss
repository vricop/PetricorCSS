@import '../utils/functions/is-valid-variant';

$_valid-margin-variants: ('responsive', 'hover');
$_valid-negative-margin-variants: ('responsive', 'hover');
$_margins-module: map-get($modules, 'margins');
$_negative-margins-module: map-get($modules, 'negative-margins');

@mixin margins-class-rules($suffix, $value, $prefix:null) {
  .#{$prefix}m-#{$suffix} { margin: $value; };
  .#{$prefix}mx-#{$suffix} { margin: { left: $value; right: $value; } };
  .#{$prefix}my-#{$suffix} { margin: { top: $value; bottom: $value; } };
  .#{$prefix}mt-#{$suffix} { margin-top: $value };
  .#{$prefix}mr-#{$suffix} { margin-right: $value };
  .#{$prefix}mb-#{$suffix} { margin-bottom: $value };
  .#{$prefix}ml-#{$suffix} { margin-left: $value };
}

@mixin margins($breakpoint: null) {
  @if ($_margins-module == true) or is-valid-variant($_margins-module, $_valid-margin-variants) {
    @each $suffix, $value in $margins {
      // # DEFAULT VARIANTS
      @if $breakpoint == null {
        @include margins-class-rules($suffix, $value);
      }

      // #Â RESPONSIVE VARIANTS
      @if index($_margins-module, 'responsive') and $breakpoint != null {
        @include margins-class-rules($suffix, $value, '#{$breakpoint}\\:');
      }
      
      // # HOVER VARIANTS
      @if index($_margins-module, 'hover') and $breakpoint == null {
        @include margins-class-rules('#{$suffix}:hover', $value, 'hover\\:');
      }
    }

    // # NEGATIVE MARGIN VARIANTS
    @if ($_negative-margins-module == true) or is-valid-variant($_negative-margins-module, $_valid-negative-margin-variants) {
      @each $suffix, $value in $negative-margins {
        @if $breakpoint == null {
          @include margins-class-rules($suffix, $value, '-');
        }

        @if index($_negative-margins-module, 'responsive') and ($breakpoint != null) {
          @include margins-class-rules($suffix, $value, '#{$breakpoint}\\:-');
        }

        @if index($_negative-margins-module, 'hover') and ($breakpoint == null) {
          @include margins-class-rules('#{$suffix}:hover', $value, 'hover\\:-');
        }
      }
    }
  }
}